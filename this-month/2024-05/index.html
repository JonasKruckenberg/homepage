<!doctype html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Operating System Development in Rust">

    
        <link rel="canonical" href="https://rust-osdev.com/this-month/2024-05/" />
    
    <link href="/css/poole.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="RSS feed for rust-osdev.com" href="https://rust-osdev.com/rss.xml" />

    <title>This Month in Rust OSDev: May 2024 | Rust OSDev</title>
</head>

<body>
    <div class="wrap">
        <div class="masthead">
          <div class="container">
            <h3 class="masthead-title">
              <a href="https://rust-osdev.com" title="Home">Rust OSDev</a>
              <small>Operating System Development in Rust</small>
            </h3>
          </div>
        </div>
  
        <div class="container content">
            <main>
    <h1>This Month in Rust OSDev: May 2024</h1>

    <span class="post-authors post-date">Published on <time datetime="2024-06-08">
            Jun 08, 2024
            
        </time>(edited by
        <a href="https://github.com/phil-opp">@phil-opp</a>)</span>

    <p>Welcome to a new issue of <em>&quot;This Month in Rust OSDev&quot;</em>. In these posts, we give a regular overview of notable changes in the Rust operating system development ecosystem.</p>
<span id="continue-reading"></span>
<p>This series is openly developed <a href="https://github.com/rust-osdev/homepage/">on GitHub</a>. Feel free to open pull requests there with content you would like to see in the next issue. If you find some issues on this page, please report them by <a href="https://github.com/rust-osdev/homepage/issues/new">creating an issue</a> or using our <a href="#comment-form"><em>comment form</em></a> at the bottom of this page.</p>
<!--
    This is a draft for the upcoming "This Month in Rust OSDev (May 2024)" post.
    Feel free to create pull requests against the `next` branch to add your
    content here.
    Please take a look at the past posts on https://rust-osdev.com/ to see the
    general structure of these posts.
-->
<h2 id="announcements-news-and-blog-posts">Announcements, News, and Blog Posts</h2>
<p>Here we collect news, blog posts, etc. related to OS development in Rust.</p>
<ul>
<li><a href="https://www.redox-os.org/news/this-month-240531/">This Month in Redox - May 2024</a>: Redox is running COSMIC file manager, editor, and terminal now</li>
<li>Bachelor's Thesis: <a href="https://db.in.tum.de/~ellmann/theses/finished/24/pirhonen_writing_an_nvme_driver_in_rust.pdf">Writing an NVMe Driver in Rust</a> (PDF)</li>
<li><a href="https://github.com/carlos-al/windows-kernel-rs">Building an Async Runtime for the Windows Kernel</a></li>
<li><a href="https://ferrous-systems.com/blog/ferrocene-24-05-0/">Ferrocene 24.05.0 now available for purchase</a></li>
<li><a href="https://codspeed.io/blog/rust-1-78-performance-impact-of-the-128-bit-memory-alignment-fix">Rust 1.78: Performance Impact of the 128-bit Memory Alignment Fix</a></li>
<li><a href="https://github.com/ogxd/gxhash">GxHash - an extremely fast hardware-accelerated non-cryptographic hashing algorithm</a> (zero dependencies, no_std compatible)</li>
<li>The Embedded Rustacean <a href="https://www.theembeddedrustacean.com/p/the-embedded-rustacean-issue-19">Issue #19</a>, <a href="https://www.theembeddedrustacean.com/p/the-embedded-rustacean-issue-20">Issue #20</a>, and <a href="https://www.theembeddedrustacean.com/p/the-embedded-rustacean-issue-21">Issue #21</a></li>
</ul>
<!--
Please follow this template:

- [Title](https://example.com)
  - (optional) Some additional context
-->
<h2 id="infrastructure-and-tooling">Infrastructure and Tooling</h2>
<p>In this section, we collect recent updates to <code>rustc</code>, <code>cargo</code>, and other tooling that are relevant to Rust OS development.</p>
<ul>
<li><a href="https://github.com/rust-lang/rust/pull/121377">Stabilize <code>LazyCell</code> and <code>LazyLock</code></a> (<code>LazyCell</code> is available in <code>no_std</code>)</li>
<li><a href="https://github.com/rust-lang/rust/pull/125951">Stabilize <code>error_in_core</code></a></li>
<li><a href="https://github.com/rust-lang/rust/pull/125023">Add <code>x86_64-unknown-linux-none</code> target</a> (freestanding linux binaries without <code>libc</code> dependency)</li>
<li><a href="https://github.com/rust-lang/rust/pull/125011">Add <code>opt-for-size</code> core lib feature flag</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/125884">Implement feature <code>integer_sign_cast</code></a></li>
</ul>
<!--
    Please use the following template:

- [Title](https://example.com)
  - (optional) Some additional context
-->
<h2 id="rust-osdev-projects"><code>rust-osdev</code> Projects</h2>
<p>In this section, we give an overview of notable changes to the projects hosted under the <a href="https://github.com/rust-osdev/about"><code>rust-osdev</code></a> organization.</p>
<!--
    Please use the following template:

    ### [`repo_name`](https://github.com/rust-osdev/repo_name)
    <span class="maintainers">Maintained by [@maintainer_1](https://github.com/maintainer_1)</span>

    The `repo_name` crate ...<<short introduction>>...

    We merged the following changes this month:
    <<changelog, either in list or text form>>
-->
<h3 id="endian-num-new-project"><a href="https://github.com/rust-osdev/endian-num"><code>endian-num</code></a> (new project!)</h3>
<p><span class="maintainers">Maintained by <a href="https://github.com/mkroening">@mkroening</a></span></p>
<p>The <code>endian-num</code> crate provides the <code>Be</code> (big-endian) and <code>Le</code> (little-endian) byte-order-aware numeric types.</p>
<ul>
<li><a href="https://github.com/rust-osdev/endian-num/commit/000f86f5470401e4d0d8824ec976738fb8a35bb7">initial implementation</a></li>
<li><a href="https://github.com/rust-osdev/endian-num/pull/1">docs: elaborate on differences to other crates</a></li>
<li><a href="https://github.com/rust-osdev/endian-num/pull/2">docs: refer to related crates via docs.rs</a></li>
</ul>
<p>Thanks to <a href="https://github.com/mkroening">@mkroening</a> for creating and maintaining this crate!</p>
<h3 id="uefi-rs"><a href="https://github.com/rust-osdev/uefi-rs"><code>uefi-rs</code></a></h3>
<p><span class="maintainers">Maintained by <a href="https://github.com/GabrielMajeri">@GabrielMajeri</a>, <a href="https://github.com/nicholasbishop">@nicholasbishop</a>, and <a href="https://github.com/phip1611">@phip1611</a></span></p>
<p>The <code>uefi-rs</code> crate provides safe and performant wrappers for <a href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface">UEFI</a>, the successor to the BIOS. We merged the following PRs this month:</p>
<ul>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1159">Fix risc target_arch cfg</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1161">Match MaximumCapsuleSize to UEFI spec</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1162">Add RuntimeServices::update_capsule</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1166">Add RuntimeServices::query_capsule_capabilities</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1168">Note about feature flags for uefi book</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1173">uefi-raw: misc</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1174">mem: clarify confusion around MemoryDescriptor</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1172">uefi/helpers: logger logs to debugcon device</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1156">Add basic API for a global system table</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1176">uefi: BootServices::allocate_pool now returns NonZero<u8> instead of *mut u8</a></li>
<li><a href="https://github.com/rust-osdev/uefi-rs/pull/1183">Fix uefi-macros trybuild test</a></li>
</ul>
<!-- - [chore(deps): update crate-ci/typos action to v1.21.0](https://github.com/rust-osdev/uefi-rs/pull/1158) -->
<!-- - [chore(deps): update rust crate trybuild to v1.0.93](https://github.com/rust-osdev/uefi-rs/pull/1157) -->
<!-- - [chore(deps): lock file maintenance](https://github.com/rust-osdev/uefi-rs/pull/1165) -->
<!-- - [chore(deps): lock file maintenance](https://github.com/rust-osdev/uefi-rs/pull/1171) -->
<!-- - [fix(deps): update rust crate anyhow to v1.0.86](https://github.com/rust-osdev/uefi-rs/pull/1164) -->
<!-- - [fix(deps): update rust crate itertools to 0.13.0](https://github.com/rust-osdev/uefi-rs/pull/1179) -->
<!-- - [fix(deps): update rust crate nix to 0.29.0](https://github.com/rust-osdev/uefi-rs/pull/1180) -->
<!-- - [chore(deps): update cachix/install-nix-action action to v27](https://github.com/rust-osdev/uefi-rs/pull/1181) -->
<!-- - [chore(deps): lock file maintenance](https://github.com/rust-osdev/uefi-rs/pull/1182) -->
<p>Thanks to <a href="https://github.com/stillinbeta">@stillinbeta</a> and <a href="https://github.com/andre-braga">@andre-braga</a> for their contributions!</p>
<h3 id="bootloader"><a href="https://github.com/rust-osdev/bootloader"><code>bootloader</code></a></h3>
<p><span class="maintainers">Maintained by <a href="https://github.com/phil-opp">@phil-opp</a> and <a href="https://github.com/orgs/rust-osdev/people/Freax13">@Freax13</a></span></p>
<p>The <code>bootloader</code> crate implements a custom Rust-based bootloader for easy loading of 64-bit ELF executables. This month, we merged the following improvements:</p>
<ul>
<li><a href="https://github.com/rust-osdev/bootloader/pull/439">Fix doc comment and error message only referencing the BIOS but used for UEFI</a></li>
<li><a href="https://github.com/rust-osdev/bootloader/pull/444">Ensure all page table frames are mapped as writable</a></li>
</ul>
<p>Thanks to <a href="https://github.com/fmckeogh">@fmckeogh</a> and <a href="https://github.com/Wasabi375">@Wasabi375</a> for their contributions!</p>
<h3 id="x86-64"><a href="https://github.com/rust-osdev/x86_64"><code>x86_64</code></a></h3>
<p><span class="maintainers">Maintained by <a href="https://github.com/phil-opp">@phil-opp</a>, <a href="https://github.com/orgs/rust-osdev/people/josephlr">@josephlr</a>, and <a href="https://github.com/orgs/rust-osdev/people/Freax13">@Freax13</a></span></p>
<p>The <code>x86_64</code> crate provides various abstractions for <code>x86_64</code> systems, including wrappers for CPU instructions, access to processor-specific registers, and abstraction types for architecture-specific structures such as page tables and descriptor tables.</p>
<p>We merged the following PRs this month:</p>
<ul>
<li><a href="https://github.com/rust-osdev/x86_64/pull/485">fix cfg related warnings</a></li>
<li><a href="https://github.com/rust-osdev/x86_64/pull/486">merge master into next</a></li>
<li><a href="https://github.com/rust-osdev/x86_64/pull/484">add Mapper::clear to clear any page table entry regardless of present flag</a></li>
<li><a href="https://github.com/rust-osdev/x86_64/pull/488">fix warnings</a></li>
</ul>
<p>Thanks to <a href="https://github.com/Wasabi375">@Wasabi375</a> for their contribution!</p>
<h3 id="multiboot2"><a href="https://github.com/rust-osdev/multiboot2"><code>multiboot2</code></a></h3>
<p><span class="maintainers">Maintained by <a href="https://github.com/phip1611">@phip1611</a></span></p>
<p>The <code>multiboot2</code> crate provides abstraction types for the multiboot information structure (MBI) of multiboot2 bootloaders. We merged the following changes this month:</p>
<ul>
<li><a href="https://github.com/rust-osdev/multiboot2/pull/210">multiboot2: builder: Allow to specify SMBIOS tag multiple times</a></li>
<li><a href="https://github.com/rust-osdev/multiboot2/pull/213">dev: misc improvements</a></li>
<li><a href="https://github.com/rust-osdev/multiboot2/pull/214">release</a></li>
<li><a href="https://github.com/rust-osdev/multiboot2/pull/216">multiboot2: fix handling of efi memory map</a></li>
</ul>
<!-- - [build(deps): bump crate-ci/typos from 1.19.0 to 1.21.0](https://github.com/rust-osdev/multiboot2/pull/211) -->
<p>Thanks to <a href="https://github.com/YtvwlD">@YtvwlD</a> for their contribution!</p>
<h3 id="linked-list-allocator"><a href="https://github.com/rust-osdev/linked-list-allocator"><code>linked-list-allocator</code></a></h3>
<p><span class="maintainers">Maintained by <a href="https://github.com/phil-opp">@phil-opp</a> and <a href="https://github.com/jamesmunns">@jamesmunns</a></span></p>
<p>The <code>linked-list-allocator</code> crate provides a basic <code>no_std</code> allocator that builds a linked list from freed memory blocks and thus needs no additional data structures. We merged the following PR this month:</p>
<ul>
<li><a href="https://github.com/rust-osdev/linked-list-allocator/pull/82">Fix warnings about <code>cfg(fuzzing)</code></a></li>
</ul>
<h2 id="other-projects">Other Projects</h2>
<p>In this section, we describe updates to Rust OS projects that are not directly related to the <code>rust-osdev</code> organization. Feel free to <a href="https://github.com/rust-osdev/homepage/pulls">create a pull request</a> with the updates of your OS project for the next post.</p>
<!--
    Please use the following template:

    ### [`owner_name/repo_name`](https://github.com/rust-osdev/owner_name/repo_name)
    <span class="maintainers">(Section written by [@your_github_name](https://github.com/your_github_name))</span>

    ...<<your project updates>>...
-->
<h3 id="mkroening-free-list"><a href="https://github.com/mkroening/free-list"><code>mkroening/free-list</code></a></h3>
<p><span class="maintainers">(Section written by <a href="https://github.com/mkroening">@mkroening</a>)</span></p>
<p>The <code>free-list</code> crate provides the <code>FreeList</code> type for managing virtual or physical memory.
Opposed to normal memory allocators, <code>FreeList</code> does not use pointers but page ranges.
It operates by keeping a list of free page ranges (hence the name) and allows allocating at user-provided ranges.
Instead of operating directly on the unallocated memory through a linked list, this free list uses statically allocated memory before dynamically allocating more memory to hold its elements.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>free_list::{FreeList, PageLayout};
</span><span>
</span><span style="color:#b48ead;">let mut</span><span> free_list = FreeList::&lt;16&gt;::new();
</span><span>
</span><span style="color:#b48ead;">unsafe </span><span>{
</span><span>    free_list.</span><span style="color:#96b5b4;">deallocate</span><span>((</span><span style="color:#d08770;">0x1000</span><span>..</span><span style="color:#d08770;">0x5000</span><span>).</span><span style="color:#96b5b4;">try_into</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>()).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>}
</span><span>assert_eq!(free_list.</span><span style="color:#96b5b4;">free_space</span><span>(), </span><span style="color:#d08770;">0x4000</span><span>);
</span><span>
</span><span style="color:#b48ead;">let</span><span> layout = PageLayout::from_size(</span><span style="color:#d08770;">0x4000</span><span>).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>assert_eq!(free_list.</span><span style="color:#96b5b4;">allocate</span><span>(layout).</span><span style="color:#96b5b4;">unwrap</span><span>(), (</span><span style="color:#d08770;">0x1000</span><span>..</span><span style="color:#d08770;">0x5000</span><span>).</span><span style="color:#96b5b4;">try_into</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>());
</span></code></pre>
<h2 id="join-us">Join Us?</h2>
<p>Are you interested in Rust-based operating system development? Our <code>rust-osdev</code> organization is always open to new members and new projects. Just let us know if you want to join! A good way for getting in touch is our <a href="https://rust-osdev.zulipchat.com">Zulip chat</a>.</p>


    <h2 id="comment-form">Comments</h2>

    <script src="https://utteranc.es/client.js"
        repo="rust-osdev/homepage"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>
</main>

            <footer class="footer">
                <hr>
                <small>Join us on <a href="https://rust-osdev.zulipchat.com">Zulip.</a><br>
                    &copy; <time datetime="2020">2020</time>-<time datetime="2022">2022</time>. All rights reserved.
                    <a href="https://rust-osdev.com/contact/">Contact</a>
                </small>
            </footer>
        </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
</body>

</html>
